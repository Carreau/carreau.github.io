<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Planning an Early Death for Python 2 | Random Thoughts</title>
<link href="../assets/css/bitter.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/main.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://carreau.github.io/posts/planning-an-early-death-for-python-2.html">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Matthias Bussonnier">
<meta property="og:site_name" content="Random Thoughts">
<meta property="og:title" content="Planning an Early Death for Python 2">
<meta property="og:url" content="http://carreau.github.io/posts/planning-an-early-death-for-python-2.html">
<meta property="og:description" content="On September 18 and 19, 2015, the Data Structure for Data Science workshop gathered at UC Berkeley's BIDS[Berkeley Institute for Data Science]. It was a productive two days of presentation, discussion">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-09-24T10:00:00Z">
<meta property="article:tag" content="python">
</head>
<body>
    <section class="social"><ul>
<li><a href="../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://twitter.com/mbussonn" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/Carreau" title="Me on Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Planning an Early Death for Python 2</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2015-09-24T10:00:00+00:00">2015-09-24 10:00</time>
            
                      |  
        <a href="planning-an-early-death-for-python-2.md" id="sourcelink">Source</a>

            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../categories/python.html" rel="tag">python</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<p>On September 18 and 19, 2015, the Data Structure for Data Science workshop gathered at UC Berkeley's BIDS[Berkeley Institute for Data Science]. It was a productive two days of presentation, discussion and working groups — a collaborative effort aimed at expanding what data science can do.</p>
<p>Despite having mostly Python developers, the workshop reached out and included members from many other programming communities (e.g., C, C++, Julia, R, etc.) as the workshop's explicit goal was to improve cross language operability. In particular, the goal was to enable python's scientific computing tools (numpy,scipy,pandas, etc.) to have a consensus backbone data-structure that would enable easier interaction with other programming languages. </p>
<p>Out of the discussion arose a topic that has long plagued the python community at large: code that requires legacy Python 2.7 is holding back the development of data-science toolsets and – by extension – the progress of data science as a whole. Python 2.7 was an important part of the history of scientific computing, but now it should be left as part of that history. Thus, we convened a small working group to plan a early death for Legacy Python.</p>
<h3>Move over Legacy Python once and for all.</h3>
<p>In collaboration with many developers among @jiffyclub, @tacasswell, @kbarbary,
@teoliphant, @pzwang, @ogrisel, we discussed different options to push Legacy
Python more or less gently through the door. We understand
that some people are still requiring the use of Legacy Python in their code
base, or require some libraries which are still only available on Legacy Python
and don't blame them.  We understand that Legacy Python was a great language
and that it's hard to move over it.  Though the retirement of Legacy Python is
2020, you will ave to make the transition then, and it will be even harder to
transition at that point.</p>
<p>So what are the step we can do to push the transition forward.</p>
<h3>Choose your words.</h3>
<p>The choice of words you make on the internet and in real life will influence
the vision people have for Legacy Python vs Python. Assume that Python 3 is
just Python, and refer to Python 2 as legacy python.  IDEs and TwitterSphere is
<a href="https://twitter.com/astrofrog/status/646976176657932288">starting</a> to <a href="https://twitter.com/almarklein/status/645542438937980929">do
that</a>, join the
movement.</p>
<p>Refer to Legacy Python in the past tense. It will reinforce the old and
deprecated state of Legacy Python. I still don't understand why people would
like to stay with a language which that many defects:</p>
<ul>
<li>it did not protect you from mixing Unicode and bytes,</li>
<li>tripped you with integer division</li>
<li>did not allow you to replace the printing function</li>
<li>had a range object which is not memory efficient</li>
<li>did not permit to re-raise exception</li>
<li>had a bad asynchronous support, without yield from</li>
<li>forced you to repeat the current class in <code>super()</code> call.</li>
<li>let you mix tab and space.</li>
<li>did not support function annotations</li>
</ul>
<p>Legacy Python was missing many other feature which are now part of Python.</p>
<p>Do not state what's better in Python 3, state that it was missing/broken in
Legacy Python.  Like the missing matrix multiplication operator was missing
multiplication operator. Legacy Python was preventing people to use efficient
numeric library which are relying on the numerical operator.</p>
<h3>Don't respond to "and on Python 2"</h3>
<p>Personally during talks I plan to not pay attention to question regarding
legacy Python, and will treat questions such questions as someone asking whether
I support windows Vista. Next question please. The less you talk about Legacy Python
the more you imply Legacy Python  is not a thing anymore.</p>
<h3>Drop support for Legacy Python (at least on paper)</h3>
<p>If you a library author, you have probably had to deal with user trying your
software on Legacy Python, and spend lot of time making your codebase
compatible with both Python 3 and legacy Python.  There are a few step you can
take to push user toward Python 3.</p>
<h4>Make your examples/documentation Python 3 only</h4>
<p>Or at least do not make effort to have examples that work using Legacy Python.
Sprinkle with function annotation, and <code>async</code>/<code>await</code> keyword can help with
communicating your example are Python 3 only.</p>
<p>You can even avoid mention of Legacy Python in your documentation and assume
your users are using Python 3, this will make writing documentation much easier
to get right.</p>
<h4>Ask user to reproduce but on up-to-date Python version.</h4>
<p>Have you ever had a bug report where you ask users to upgrade your libraries
dependencies ? Do the same with Python. If a user make a bug report with Python
2.7 ask them if they can reproduce with an up-to date version of Python, even
if the bug is obviously from your side.  If they really can't upgrade they will
know, if they do and can reproduce, then you'll have at least converted one
user from Legacy Python (and in the meantime you might have already corrected the bug).</p>
<h4>Defer 2.7 support to companies like Continuum</h4>
<p>This is already what some <a href="http://www.curiousefficiency.org/posts/2015/04/stop-supporting-python26.html">Nick Coghlan
recommands</a>
for Python 2.6, and that's what you can do for Legacy Python fix only. If you
have a sufficient number of user which are asking for 2.7 support, accept the
bug report, but as an open source maintainer do not work on it. You can partner
with companies like Continuum or Enthought, from which user would "buy" 2.7 support
for your libraries, in exchange of which the Companies could spend some of their
developer time fixing your Legacy Python bugs.</p>
<p>After a quick discussion with Peter Wang, it would be possible, but details
need to be worked on.</p>
<h3>Make Python 3 attractive</h3>
<h4>Create new features</h4>
<p>Plan you new features explicitly for Python 3, even if the feature would be
simple to make Legacy Python compatible, disable it on old platforms, and issue
a warning indicating that the feature is not available on Legacy Python
install.</p>
<p>You will be able to use all the shiny Python features which are lacking on Legacy Python
like Unicode characters!</p>
<h4>Create new Python packages</h4>
<p>Make new packages Python 3 only, and make all the design decision you didn't do
on your previous package. Pure python libraries are much easier to create and
<a href="http://flit.readthedocs.org/en/latest/">build</a>  once you are not hold back by
legacy Python.</p>
<h3>Helping Other project</h3>
<p>Despite all the good will in the world the Migration path from Legacy Python
can be hard.  There are still a lot of things that can be done to help current
and new project to push forward the adoption of Python.</p>
<h4>Testing</h4>
<p>Make sure that all the project you care about have continuous integration on
Python 3, if possible even the documentation building done with Python 3, help
to make Python 3 the default.</p>
<p>With continuous integration, check that your favorites projects are tested on
Python Nightly, most CI provider allow the tests to be ran on nightly, but do
not make the status of the project turn red if the test are failing. See
<a href="http://docs.travis-ci.com/user/customizing-the-build/#Rows-that-are-Allowed-to-Fail"><code>allow_faillure</code></a>
on Travis-CI for example.</p>
<h4>Porting C-extensions, move to Cython</h4>
<p>The path to migrate C-extension is not well documented, the preferred approach
is to use CFFI, but there is still alack of well written centralised, document
on how to integrate with Python 3. IF you are knowledgeable on this domain, your help is welcomed.</p>
<h3>The things we will (probably) not do.</h3>
<p>Make a twitter account that shame people that use Legacy Python, though we
might do a Parody account which say funny things, and push people toward Python 3.</p>
<p>Slow code on purpose and obviously on Legacy Python:</p>
<pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">time</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre>


<p>Though it would be fun.</p>
<p>Ask user at IDE/CLI startup time if they want to upgrade to Python3:</p>
<pre class="code literal-block"><span class="nv">$ </span>python2
Python 2.7.10 <span class="o">(</span>default, Jul <span class="m">13</span> 2015, 12:05:58<span class="o">)</span>
Type <span class="s2">"help"</span>, <span class="s2">"copyright"</span>, <span class="s2">"credits"</span> or <span class="s2">"license"</span> <span class="k">for</span> more information.

Warning you are starting a Legacy Python interpreter. Aren<span class="s1">'t you sure you don'</span>t
want not to upgrade to a newer version ? <span class="o">[</span>y<span class="o">]</span>:_
</pre>


<p>Delay Legacy Python packages releases by a few weeks to incentive people to
migrate, or should we actually consider the people on Python 2 as guinea pig
and release nightly ?</p>
<h2>End word</h2>
<p>Remember, Legacy Python is responsible for global warming, encourage people to
stay with IE6, and is voting for Donald Trump.</p>
<p>As usual my English is far from perfect, so Pull Request welcomed on this blog
post.</p>
</div>
        </div>
        
                    <script src="https://apis.google.com/js/plusone.js"></script><div class="g-comments" data-href="http://carreau.github.io/posts/planning-an-early-death-for-python-2.html" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD">
</div>


    </div>
                    <footer id="footer"><p>Contents © 2015         <a href="mailto:bussonnier.matthias(at)mail-by-google(dot)com">Matthias Bussonnier</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png"></a><br>This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Matthias Bussonnier</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
</p>
            
        </footer>
</div>
    </section><script src="../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../assets/js/jquery.timeago.js" type="text/javascript"></script><script src="../assets/js/mathjax.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
